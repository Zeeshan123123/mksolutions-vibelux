# Database Connection Pooling Configuration

# Primary database URL (required)
DATABASE_URL="postgresql://user:password@host:port/database?sslmode=require"

# Connection Pool Settings
# Maximum number of connections in the pool (default: 10 for dev, 25 for prod, 1 for serverless)
DATABASE_CONNECTION_LIMIT=25

# Time to wait for a connection from the pool in seconds (default: 10)
DATABASE_POOL_TIMEOUT=20

# Time before idle connections are closed in seconds (default: 10)
DATABASE_IDLE_TIMEOUT=20

# Maximum time for a statement to execute in milliseconds (default: 5000)
DATABASE_STATEMENT_TIMEOUT=10000

# Time to wait for a connection to be established in seconds (default: 10)
DATABASE_CONNECT_TIMEOUT=15

# PgBouncer pooling mode (optional: "transaction" or "session")
# Use "transaction" for serverless environments
DATABASE_POOLING_MODE=transaction

# Database schema (optional, defaults to "public")
DATABASE_SCHEMA=public

# Monitoring and Logging
# Enable database monitoring endpoint (true/false)
ENABLE_DB_MONITORING=true

# Log database queries (true/false)
DATABASE_LOG_QUERIES=false

# Slow query threshold in milliseconds (default: 1000)
SLOW_QUERY_THRESHOLD=1000

# Retry Configuration (optional)
# Number of retry attempts for failed connections
DATABASE_RETRY_ATTEMPTS=3

# Initial retry delay in milliseconds
DATABASE_RETRY_DELAY=1000

# Maximum retry delay in milliseconds
DATABASE_MAX_RETRY_DELAY=30000